[package]
authors = { workspace = true }
description = "Actix-Web API server for the crime map application"
edition = { workspace = true }
license = { workspace = true }
name = "crime_map_server"
repository = { workspace = true }
version = "0.1.0"

[lib]
name = "crime_map_server"
path = "src/lib.rs"

[[bin]]
name = "crime_map_server"
path = "src/main.rs"

[dependencies]
crime_map_crime_models = { workspace = true }
crime_map_database_models = { workspace = true }
crime_map_database = { workspace = true }
crime_map_server_models = { workspace = true }
crime_map_geography = { workspace = true }
crime_map_ai = { workspace = true }
crime_map_conversations = { workspace = true }
moosicbox_json_utils = { workspace = true, features = ["database"] }
switchy_database = { workspace = true, features = [
  "postgres-raw",
  "sqlite-rusqlite",
] }
switchy_database_connection = { workspace = true, features = [
  "sqlite-rusqlite",
] }

actix-web = { workspace = true, features = ["macros"] }
actix-cors = { workspace = true }
actix-files = { workspace = true }
async-stream = { workspace = true }

dialoguer = { workspace = true }
duckdb = { workspace = true }
log = { workspace = true }
pretty_env_logger = { workspace = true }
serde = { workspace = true }
serde_json = { workspace = true, features = ["std"] }
tokio = { workspace = true, features = ["full"] }
uuid = { workspace = true }

[features]
default = ["bedrock"]
bedrock = ["crime_map_ai/bedrock"]
duckdb-bundled = ["duckdb/bundled"]
fail-on-warnings = [
  "crime_map_ai/fail-on-warnings",
  "crime_map_conversations/fail-on-warnings",
  "crime_map_crime_models/fail-on-warnings",
  "crime_map_database/fail-on-warnings",
  "crime_map_database_models/fail-on-warnings",
  "crime_map_geography/fail-on-warnings",
  "crime_map_server_models/fail-on-warnings",
]
