id = "dc_mpd"
name = "DC Metropolitan Police Department"
city = "Washington"
state = "DC"
output_filename = "dc_crimes.json"

[fetcher]
type = "arcgis"
# Per-year layers: DC publishes each year as a separate MapServer layer.
# Layer 41 = 2026, Layer 7 = 2025, Layer 6 = 2024.
query_urls = [
  "https://maps2.dcgis.dc.gov/dcgis/rest/services/FEEDS/MPD/MapServer/41/query",
  "https://maps2.dcgis.dc.gov/dcgis/rest/services/FEEDS/MPD/MapServer/7/query",
  "https://maps2.dcgis.dc.gov/dcgis/rest/services/FEEDS/MPD/MapServer/6/query",
]
page_size = 1000
date_column = "REPORT_DAT"

[fields]
incident_id = ["CCN"]
crime_type = ["OFFENSE"]
block_address = "BLOCK"
location_type = "WARD"

[fields.occurred_at]
type = "epoch_ms"
field = "REPORT_DAT"

[fields.lat]
field = "LATITUDE"
type = "f64"

[fields.lng]
field = "LONGITUDE"
type = "f64"

[fields.description]
type = "combine"
fields = ["OFFENSE", "METHOD"]
separator = " ("
# Note: this produces "ROBBERY (GUN" not "ROBBERY (GUN)" but it's close enough.
# A suffix option could be added later if needed.

[fields.arrest]
type = "none"
